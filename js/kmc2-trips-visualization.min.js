jQuery(document).ready(function(){"use strict";var e,t,n,r,i,s,o,u;u=kmc2_visualization_vars.siteurl+"wp-admin/admin-ajax.php";if(jQuery("#trips-visualization-map").length===0)return!1;e=L.map("trips-visualization-map",{scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1,fullscreenControl:!0});e.on("enterFullscreen",function(){e.scrollWheelZoom.enable();e.doubleClickZoom.enable();e.touchZoom.enable()});e.on("exitFullscreen",function(){e.scrollWheelZoom.disable();e.doubleClickZoom.disable();e.touchZoom.disable()});t=new L.StamenTileLayer("watercolor");e.addLayer(t);e.fitWorld();n=L.markerClusterGroup({maxClusterRadius:50});jQuery.ajax({type:"POST",url:u+"?action=kmc2_posts_location",success:function(t){t=jQuery.parseJSON(t);for(i=0;i<t.length;i++){s=t[i];o='<a href="'+kmc2_visualization_vars.siteurl+"?p="+s.id+'">'+s.post_title+"</a>";r=L.marker(L.latLng(s.geo_latitude,s.geo_longitude),{title:o});r.bindPopup(o);n.addLayer(r)}e.fitBounds(n.getBounds(),{padding:[10,10]})}});e.addLayer(n)});