(function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",forceSeparateButton:!1},onAdd:function(e){var t="leaflet-control-zoom-fullscreen",n;e.zoomControl&&!this.options.forceSeparateButton?n=e.zoomControl._container:n=L.DomUtil.create("div","leaflet-bar");this._createButton(this.options.title,t,n,this.toggleFullScreen,e);return n},_createButton:function(t,n,r,i,s){var o=L.DomUtil.create("a",n,r);o.href="#";o.title=t;L.DomEvent.addListener(o,"click",L.DomEvent.stopPropagation).addListener(o,"click",L.DomEvent.preventDefault).addListener(o,"click",i,s);L.DomEvent.addListener(r,e.fullScreenEventName,L.DomEvent.stopPropagation).addListener(r,e.fullScreenEventName,L.DomEvent.preventDefault).addListener(r,e.fullScreenEventName,this._handleEscKey,s);L.DomEvent.addListener(document,e.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,e.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,e.fullScreenEventName,this._handleEscKey,s);return o},toggleFullScreen:function(){this._exitFired=!1;var t=this._container;if(this._isFullscreen){e.supportsFullScreen?e.cancelFullScreen(t):L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen");this.invalidateSize();this.fire("exitFullscreen");this._exitFired=!0;this._isFullscreen=!1}else{e.supportsFullScreen?e.requestFullScreen(t):L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen");this.invalidateSize();this.fire("enterFullscreen");this._isFullscreen=!0}},_handleEscKey:function(){if(!e.isFullScreen(this)&&!this._exitFired){this.fire("exitFullscreen");this._exitFired=!0;this._isFullscreen=!1}}});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions);this.addControl(this.fullscreenControl)}});L.control.fullscreen=function(e){return new L.Control.FullScreen(e)};var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},t="webkit moz o ms khtml".split(" ");if(typeof document.exitFullscreen!="undefined")e.supportsFullScreen=!0;else for(var n=0,r=t.length;n<r;n++){e.prefix=t[n];if(typeof document[e.prefix+"CancelFullScreen"]!="undefined"){e.supportsFullScreen=!0;break}}if(e.supportsFullScreen){e.fullScreenEventName=e.prefix+"fullscreenchange";e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};e.requestFullScreen=function(e){return this.prefix===""?e.requestFullscreen():e[this.prefix+"RequestFullScreen"]()};e.cancelFullScreen=function(){return this.prefix===""?document.exitFullscreen():document[this.prefix+"CancelFullScreen"]()}}typeof jQuery!="undefined"&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var t=jQuery(this);e.supportsFullScreen&&e.requestFullScreen(t)})});window.fullScreenApi=e})();